variables:
  numericTypes: &numericTypes
  - {bsonType: int}
  - {bsonType: long}
  - {bsonType: double}
  - {bsonType: decimal}
  - {bsonType: !!str "null"}

catalog_schema:
  {
    "foo": {
      "nullif": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v1": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "v2": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      'twoArgCoalesce': {
        'bsonType': 'object',
        'additionalProperties': true
      },
      'multiArgCoalesce': {
        'bsonType': 'object',
        'additionalProperties': true
      },
      "size": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "a": {
            "anyOf": [
              { "bsonType": "array" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "length": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "s": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "comment": {
            "bsonType": "string"
          }
        }
      },
      "nullAndMissing": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "d": {
            "anyOf": [
              { "bsonType": "date" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "substring": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "str": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "start": {
            "anyOf": [
              { "bsonType": "int" },
              { "bsonType": !!str "null" }
            ]
          },
          "length": {
            "anyOf": [
              { "bsonType": "int" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "fold": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "s": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "trim": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "substr": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "str": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "position": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "s1": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "s2": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "abs": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes }
        }
      },
      "ceilAndFloor": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes }
        }
      },
      "log": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes },
          "base": { "anyOf": *numericTypes }
        }
      },
      "mod": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes },
          "divisor": { "anyOf": *numericTypes }
        }
      },
      "pow": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes },
          "exponent": { "anyOf": *numericTypes }
        }
      },
      "radians": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "degrees": { "anyOf": *numericTypes }
        }
      },
      "round": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes },
          "place": { "anyOf": [
              { "bsonType": "int" },
              { "bsonType": "long" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "sqrt": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "v": { "anyOf": *numericTypes }
        }
      },
      "trigonometry": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "radians": { "anyOf": *numericTypes }
        }
      },
      "split": {
        "bsonType": "object",
        'required': [ '_id' ],
        'additionalProperties': false,
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "str": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "delim": {
            "anyOf": [
              { "bsonType": "string" },
              { "bsonType": !!str "null" }
            ]
          },
          "tokenNum": {
            "anyOf": [
              { "bsonType": "int" },
              { "bsonType": !!str "null" }
            ]
          }
        }
      },
      "dates": {
        "bsonType": "object",
        'required': [ '_id' ],
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "date1": {
            "bsonType": "date"
          },
          "date2": {
            "bsonType": "date"
          },
          "interval": {
            "anyOf": [
              { "bsonType": "int" },
              { "bsonType": "long" }
            ]
          }
        },
        "additionalProperties": false,
      },
      "datepart": {
        "bsonType": "object",
        'required': [ '_id' ],
        "properties": {
          "_id": {
            "bsonType": "int"
          },
          "date1": {
            "bsonType": "date"
          },
        },
        "additionalProperties": false,
      }
    }
  }
